<svg width="1400" height="720" viewBox="0 0 1400 720" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="MetaClaw Obsidian bot workflow">
  <defs>
    <linearGradient id="bg" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#0b1220"/>
      <stop offset="55%" stop-color="#10243f"/>
      <stop offset="100%" stop-color="#17365c"/>
    </linearGradient>
    <linearGradient id="cardA" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#1d4ed8"/>
      <stop offset="100%" stop-color="#2563eb"/>
    </linearGradient>
    <linearGradient id="cardB" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#0f766e"/>
      <stop offset="100%" stop-color="#0d9488"/>
    </linearGradient>
    <linearGradient id="cardC" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#a16207"/>
      <stop offset="100%" stop-color="#d97706"/>
    </linearGradient>
    <linearGradient id="cardD" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#6d28d9"/>
      <stop offset="100%" stop-color="#7c3aed"/>
    </linearGradient>
    <linearGradient id="panel" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#ffffff" stop-opacity="0.12"/>
      <stop offset="100%" stop-color="#ffffff" stop-opacity="0.05"/>
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="10" stdDeviation="10" flood-color="#020617" flood-opacity="0.35"/>
    </filter>
    <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#cbd5e1"/>
    </marker>
    <style>
      .title { font: 700 40px 'Avenir Next', 'Segoe UI', sans-serif; fill: #f8fafc; }
      .subtitle { font: 500 19px 'Avenir Next', 'Segoe UI', sans-serif; fill: #cbd5e1; }
      .h { font: 700 22px 'Avenir Next', 'Segoe UI', sans-serif; fill: #f8fafc; }
      .b { font: 500 16px 'Avenir Next', 'Segoe UI', sans-serif; fill: #e2e8f0; }
      .small { font: 500 14px 'Avenir Next', 'Segoe UI', sans-serif; fill: #cbd5e1; }
      .accent { font: 600 13px 'Avenir Next', 'Segoe UI', sans-serif; fill: #fde68a; }
      .link { stroke: #cbd5e1; stroke-width: 2.5; fill: none; marker-end: url(#arrow); }
      .linkSoft { stroke: #93c5fd; stroke-width: 2.2; fill: none; marker-end: url(#arrow); }
      .linkWarn { stroke: #fde68a; stroke-width: 2.2; fill: none; marker-end: url(#arrow); }
    </style>
  </defs>

  <rect width="1400" height="720" fill="url(#bg)"/>
  <circle cx="1180" cy="130" r="180" fill="#38bdf8" opacity="0.10"/>
  <circle cx="250" cy="650" r="220" fill="#22c55e" opacity="0.08"/>

  <text x="56" y="70" class="title">MetaClaw Obsidian Bot Workflow</text>
  <text x="56" y="102" class="subtitle">Reproducible loop: user intent -> bot definition -> engine compile/run -> isolated container -> controlled save</text>

  <rect x="56" y="150" width="286" height="170" rx="18" fill="url(#cardD)" filter="url(#shadow)"/>
  <rect x="56" y="150" width="286" height="170" rx="18" fill="url(#panel)"/>
  <text x="80" y="194" class="h">User Intent</text>
  <text x="80" y="222" class="b">- Defines target bot behavior</text>
  <text x="80" y="247" class="b">- Chooses capabilities and boundaries</text>
  <text x="80" y="272" class="b">- Keeps keys in host env only</text>

  <rect x="390" y="150" width="328" height="170" rx="18" fill="url(#cardA)" filter="url(#shadow)"/>
  <rect x="390" y="150" width="328" height="170" rx="18" fill="url(#panel)"/>
  <text x="414" y="194" class="h">Bot Definition</text>
  <text x="414" y="222" class="b">- Clawfile policy + mounts + lifecycle</text>
  <text x="414" y="247" class="b">- Image-layer business code</text>
  <text x="414" y="272" class="b">- Example/project layout or custom repo</text>

  <rect x="760" y="144" width="310" height="182" rx="22" fill="none" stroke="#fbbf24" stroke-width="2" stroke-dasharray="7 6" opacity="0.85"/>
  <text x="780" y="165" class="accent">engine value layer</text>

  <rect x="766" y="150" width="298" height="170" rx="18" fill="url(#cardC)" filter="url(#shadow)"/>
  <rect x="766" y="150" width="298" height="170" rx="18" fill="url(#panel)"/>
  <text x="790" y="194" class="h">MetaClaw Engine</text>
  <text x="790" y="220" class="b">- validate -> compile -> run</text>
  <text x="790" y="244" class="b">- enforce habitat policy gates</text>
  <text x="790" y="268" class="b">- lifecycle: ephemeral or detached daemon</text>
  <text x="790" y="292" class="b">- inject secrets by env name only</text>

  <rect x="1112" y="150" width="232" height="170" rx="18" fill="#0f172a" opacity="0.95" filter="url(#shadow)"/>
  <rect x="1112" y="150" width="232" height="170" rx="18" fill="url(#panel)"/>
  <text x="1134" y="194" class="h">Container Runtime</text>
  <text x="1134" y="222" class="b">Apple / Podman / Docker</text>
  <text x="1134" y="247" class="b">per-bot isolation</text>
  <text x="1134" y="272" class="b">ephemeral + detached runs</text>
  <text x="1134" y="297" class="b">policy-enforced mounts/net</text>

  <rect x="56" y="392" width="418" height="230" rx="20" fill="url(#cardB)" filter="url(#shadow)"/>
  <rect x="56" y="392" width="418" height="230" rx="20" fill="url(#panel)"/>
  <text x="84" y="436" class="h">Obsidian Vault + Host Paths</text>
  <text x="84" y="464" class="b">- Vault mounted read-only in container</text>
  <text x="84" y="489" class="b">- Host data paths outside vault</text>
  <text x="84" y="514" class="b">- Save operation happens on host side</text>
  <text x="84" y="539" class="b">- Write audit in host logs</text>
  <text x="84" y="570" class="small">No overlapping mount shortcut to writable vault path</text>

  <rect x="520" y="392" width="414" height="230" rx="20" fill="#0b203a" opacity="0.95" filter="url(#shadow)"/>
  <rect x="520" y="392" width="414" height="230" rx="20" fill="url(#panel)"/>
  <text x="548" y="436" class="h">Engine Guarantees</text>
  <text x="548" y="464" class="b">- Security baseline: deny-by-default net/mount/env</text>
  <text x="548" y="489" class="b">- Reproducibility: locks + digest-pinned image</text>
  <text x="548" y="514" class="b">- Auditability: capsule diff + run event traces</text>
  <text x="548" y="539" class="b">- Portability: one contract across runtimes</text>
  <text x="548" y="570" class="small">This is the engine value beyond one-off scripts</text>

  <rect x="980" y="392" width="364" height="230" rx="20" fill="#10233f" opacity="0.95" filter="url(#shadow)"/>
  <rect x="980" y="392" width="364" height="230" rx="20" fill="url(#panel)"/>
  <text x="1008" y="436" class="h">LLM + Web Providers</text>
  <text x="1008" y="464" class="b">- Gemini OpenAI-compatible endpoint</text>
  <text x="1008" y="489" class="b">- Tavily search when `/net out` enabled</text>
  <text x="1008" y="514" class="b">- Keys injected via env name only</text>
  <text x="1008" y="539" class="b">- No key persisted in `.claw`/capsule</text>
  <text x="1008" y="570" class="small">Default network mode stays `none`</text>

  <path d="M 342 235 C 360 235, 370 235, 390 235" class="link"/>
  <path d="M 718 235 C 736 235, 746 235, 766 235" class="link"/>
  <path d="M 1064 235 C 1080 235, 1092 235, 1112 235" class="link"/>

  <path d="M 915 320 C 915 350, 915 360, 915 392" class="linkSoft"/>
  <path d="M 1188 320 C 1188 350, 1188 360, 1188 392" class="linkWarn"/>
  <path d="M 554 320 C 554 350, 554 360, 554 392" class="linkSoft"/>

  <text x="728" y="347" class="small">engine outputs guarantees and traces</text>
  <text x="1030" y="347" class="small">networked calls only when enabled</text>
  <text x="394" y="347" class="small">vault mount/save constraints come from bot definition</text>
</svg>
